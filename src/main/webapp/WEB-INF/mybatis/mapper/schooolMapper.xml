<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="school">
	<insert id="insertSchool" parameterType="com.eydiz.school.School">
		INSERT INTO school(scNo, memberNo, sccaNo, scSubject, scContent, scSavefilename, scDate, scNumber, scAllNumber)
		VALUES (school_seq.NEXTVAL, #{memberNo}, #{sccaNo}, #{scSubject}, #{scContent}, #{scSavefilename, jdbcType=VARCHAR}, SYSDATE, 1, #{scAllNumber})
	</insert>
	
	<select id="listSchool" parameterType="map" resultType="com.eydiz.school.School">
		SELECT scNo, memberNo, sc.sccaNo, scSubject, scContent, scSavefilename, scDate, scNumber, scAllNumber
		FROM school s
		JOIN member_detail m ON m.memberNo = s.memberNo
		JOIN school_category sc ON s.sccaNo = sc.sccaNo
	</select>
</mapper>